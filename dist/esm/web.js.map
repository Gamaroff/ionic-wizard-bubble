{"version":3,"file":"web.js","sourceRoot":"","sources":["../../src/web.ts"],"names":[],"mappings":"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","sourcesContent":["import { WebPlugin } from '@capacitor/core';\nimport type { WizardBubblePlugin, WizardBubbleOptions } from './definitions';\n\nexport class WizardBubbleWeb extends WebPlugin implements WizardBubblePlugin {\n  private currentStep = 0;\n  private steps: WizardBubbleOptions['steps'] = [];\n  private bubbleElement: HTMLElement | null = null;\n  private highlightElement: HTMLElement | null = null;\n  private options: WizardBubbleOptions | null = null;\n\n  // Test properties\n  get testBubbleElement() { return this.bubbleElement; }\n  get testCurrentStep() { return this.currentStep; }\n  get testCurrentHighlight() { return this.highlightElement; }\n  testHighlightTarget(element: HTMLElement) {\n    this.highlightTarget(element);\n  }\n\n  private highlightTarget(element: HTMLElement) {\n    if (!this.highlightElement) {\n      this.highlightElement = document.createElement('div');\n      this.highlightElement.style.position = 'absolute';\n      this.highlightElement.style.border = '2px solid blue';\n      this.highlightElement.style.pointerEvents = 'none';\n      document.body.appendChild(this.highlightElement);\n    }\n\n    const rect = element.getBoundingClientRect();\n    this.highlightElement.style.top = `${rect.top}px`;\n    this.highlightElement.style.left = `${rect.left}px`;\n    this.highlightElement.style.width = `${rect.width}px`;\n    this.highlightElement.style.height = `${rect.height}px`;\n  }\n\n  async hide(): Promise<void> {\n    if (this.bubbleElement) {\n      document.body.removeChild(this.bubbleElement);\n      this.bubbleElement = null;\n    }\n    if (this.highlightElement) {\n      document.body.removeChild(this.highlightElement);\n      this.highlightElement = null;\n    }\n  }\n\n  async show(options: WizardBubbleOptions): Promise<void> {\n    this.steps = options.steps;\n    this.currentStep = 0;\n    this.options = options;\n\n    // Create bubble element\n    this.bubbleElement = document.createElement('div');\n    this.bubbleElement.className = 'wizard-bubble';\n    document.body.appendChild(this.bubbleElement);\n\n    // Create highlight element\n    this.highlightElement = document.createElement('div');\n    this.highlightElement.style.position = 'absolute';\n    this.highlightElement.style.border = '2px solid blue';\n    this.highlightElement.style.pointerEvents = 'none';\n    document.body.appendChild(this.highlightElement);\n\n    // Apply theme\n    const theme = options.theme || {};\n    this.bubbleElement.style.backgroundColor = theme.backgroundColor || '#ffffff';\n    this.bubbleElement.style.color = theme.textColor || '#333333';\n    this.bubbleElement.style.padding = '15px';\n    this.bubbleElement.style.borderRadius = theme.borderRadius || '8px';\n    this.bubbleElement.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';\n    this.bubbleElement.style.position = 'absolute';\n    this.bubbleElement.style.zIndex = '1000';\n    this.bubbleElement.style.maxWidth = '300px';\n\n    await this.showStep();\n  }\n\n  private async showStep(): Promise<void> {\n    if (!this.bubbleElement || !this.options) return;\n\n    const step = this.steps[this.currentStep];\n    const targetElement = document.getElementById(step.targetId);\n\n    if (!targetElement) {\n      throw new Error(`Target element with ID ${step.targetId} not found`);\n    }\n\n    // Update bubble content\n    this.bubbleElement.textContent = step.text;\n\n    // Position bubble near target\n    const targetRect = targetElement.getBoundingClientRect();\n    this.bubbleElement.style.top = `${targetRect.bottom + 10}px`;\n    this.bubbleElement.style.left = `${targetRect.left}px`;\n\n    // Highlight target\n    this.highlightTarget(targetElement);\n  }\n\n  async next(): Promise<{ isFinished: boolean }> {\n    if (this.currentStep < this.steps.length - 1) {\n      this.currentStep++;\n      await this.showStep();\n      return { isFinished: false };\n    } else {\n      await this.hide();\n      return { isFinished: true };\n    }\n  }\n}\n"]}